general:
  artifacts:
    - target/

machine:
  java:
    version: oraclejdk8
  post:
    - pushd parquet-mr && ./build/install_deps.sh && popd
  environment:
    TERM: dumb
    TEST_CODECS: gzip,snappy,uncompressed

dependencies:
  pre:
    - ./build/mvn install --batch-mode -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true
  override:
    - ./build/mvn dependency:go-offline

test:
  override:
    - ./build/mvn test

deployment:
  release:
    tag: /[0-9]+(\.[0-9]+)+/
    commands:
      - ./gradlew -i bintrayUpload

